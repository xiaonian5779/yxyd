<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./style.css">

	<title>专业信息</title>
	<style>
		.navbar #subject-icon::before {
			content: "";
			position: absolute;
			top: 0;
			left: 25%;
			width: 25%;
			height: 100%;
			background-color: #6bc3f3;
			opacity: 0.5;
			z-index: -1;
			border-radius: 10px;
			/* 添加圆角 */
			box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
			/* 内阴影，模拟立体效果 */
		}

		.initial-hint {
			text-align: center;
			font-size: 1.2em;
			color: #888;
			margin-top: 50px;
		}

		.container {
			flex: 1;
			display: flex;
			overflow: hidden;
			/* 隐藏溢出部分 */
		}

		nav {
			flex: 1;
			background-color: #f0f0f0;
			padding: 20px;
			overflow-y: auto;
			/* 仅垂直方向滚动 */
			height: 100vh;
			/* 填满可视区域的高度 */
		}

		nav ul {
			list-style-type: none;
			padding: 0;
		}

		nav ul li {
			cursor: pointer;
			margin-bottom: 8px;
			padding: 12px;
			background-color: #f8f8f8;
			border-radius: 8px;
			transition: background-color 0.3s ease, transform 0.2s ease;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			/* 添加阴影效果 */
		}

		nav ul li:hover {
			background-color: #e0e0e0;
			transform: translateY(-2px);
			/* 提升按钮略微 */
		}

		/* 去除每行前面的点 */
		ul {
			list-style-type: none;
			padding-left: 0;
		}

		.content {
    flex: 3;
    padding: 20px;
    overflow-y: auto;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: stretch;
}

.module {
    padding: 20px;
    background-color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    transition: all 0.3s ease;
}

.module:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

.module-title {
    margin-bottom: 15px;
    font-size: 1.5em;
    color: #333;
}

.module h3 {
    margin-top: 0;
    margin-bottom: 10px;
    color: #333;
    font-size: 1.2em;
}

.module ul {
    list-style-type: none;
    padding: 0;
}

.module ul li {
    margin-bottom: 8px;
    color: #555;
}

	</style>
</head>

<body>

	<div class="container"> <!-- 新增一个容器包裹左侧导航栏和右侧内容区域 -->
		<nav>
			<ul id="navList">
			</ul>
		</nav>

		<div class="content" id="contentArea">
			<div class="initial-hint">请选择一个专业以查看详情</div>
		</div>


	</div>
	<footer class="navbar">
		<a href="index.html">
			<span class="navbar-icon" id="home-icon"></span>
			<span>主 页</span>
		</a>
		<a href="class.html">
			<span class="navbar-icon" id="subject-icon"></span>
			<span>专 业</span>
		</a>
		<a href="school.html">
			<span class="navbar-icon" id="school-icon"></span>
			<span>院 校</span>
		</a>
		<a href="my.html">
			<span class="navbar-icon" id="mine-icon"></span>
			<span>我 的</span>
		</a>
	</footer>
	<script>
        // 异步加载 JSON 文件
        function loadJSON(callback) {
            var xhr = new XMLHttpRequest();
            xhr.overrideMimeType("application/json");
            xhr.open('GET', 'class.json', true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status == "200") {
                    callback(xhr.responseText);
                }
            };
            xhr.send(null);
        }

        // 显示专业详情
        function displayDetails(major) {
            // 清除现有内容
            contentArea.innerHTML = '';

            var majorTitle = document.createElement('h2');
            majorTitle.className = 'module-title';
            majorTitle.textContent = major.name;
            contentArea.appendChild(majorTitle);

            // 创建和添加科目标题及列表
            var subjectsModule = document.createElement('div');
            subjectsModule.className = 'module';
            var subjectsHeading = document.createElement('h3');
            subjectsHeading.textContent = '科目';
            subjectsModule.appendChild(subjectsHeading);
            var subjectsList = document.createElement('ul');
            major.subjects.forEach(function (subject) {
                var subjectItem = document.createElement('li');
                subjectItem.textContent = subject;
                subjectsList.appendChild(subjectItem);
            });
            subjectsModule.appendChild(subjectsList);

            // 创建和添加历年国家线标题及列表
            var scoresModule = document.createElement('div');
            scoresModule.className = 'module';
            var scoresHeading = document.createElement('h3');
            scoresHeading.textContent = '历年国家线';
            scoresModule.appendChild(scoresHeading);
            var scoresList = document.createElement('ul');
            major.scores.forEach(function (scoreObj) {
                var scoreItem = document.createElement('li');
                scoreItem.textContent = `${scoreObj.year}年: ${scoreObj.score}`;
                scoresList.appendChild(scoreItem);
            });
            scoresModule.appendChild(scoresList);

            // 创建和添加历年报录比标题及列表
            var admissionRatioModule = document.createElement('div');
            admissionRatioModule.className = 'module';
            var admissionRatioHeading = document.createElement('h3');
            admissionRatioHeading.textContent = '历年报录比';
            admissionRatioModule.appendChild(admissionRatioHeading);
            var admissionRatioList = document.createElement('ul');
            major.admissionRatio.forEach(function (ratioObj) {
                var ratioItem = document.createElement('li');
                ratioItem.textContent = `${ratioObj.year}年: ${ratioObj.ratio}`;
                admissionRatioList.appendChild(ratioItem);
            });
            admissionRatioModule.appendChild(admissionRatioList);

            // 添加所有模块到 contentArea
            contentArea.appendChild(subjectsModule);
            contentArea.appendChild(scoresModule);
            contentArea.appendChild(admissionRatioModule);
        }

        // 填充导航菜单
        function populateNavMenu(majors) {
            var navList = document.getElementById('navList');

            majors.forEach(function (major) {
                var listItem = document.createElement('li');
                listItem.textContent = major.name;
                listItem.addEventListener('click', function () {
                    displayDetails(major);
                });
                navList.appendChild(listItem);
            });
        }

        // 加载 JSON 数据并执行回调函数
        loadJSON(function (response) {
            var majors = JSON.parse(response);
            populateNavMenu(majors);
        });

    </script>

</body>

</html>